<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Explove | Happy Birthday Bestie! ü•≥</title>

    <link rel="manifest" href="http://127.0.0.1:8000/manifest.json">
    <meta name="theme-color" content="#e91e63">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!--  Google Fonts  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Amatic+SC:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="http://127.0.0.1:8000/user/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="http://127.0.0.1:8000/user/vendor/aos/aos.css" rel="stylesheet">
    <link href="http://127.0.0.1:8000/user/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="http://127.0.0.1:8000/user/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
<!-- Font Awesome Free CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- Template Main CSS File -->
  <link rel="stylesheet" href="main.css">

    <link rel="shortcut icon" href="./images/logo.png" type="image/x-icon">



</head>

<body id="viewLetter">

    <!-- Start Header -->
    <header id="header" class="header fixed-top d-flex align-items-center bg-header-cu">
        <div class="container d-flex align-items-center justify-content-between">

            <a href="/#home" class="logo d-flex align-items-center me-auto me-lg-0">
                <img src="./images/logo.png" class="me-3" alt="Explove">
                <h1><span class="brand-text-font d-none d-md-block">Explove</span></h1>
            </a>
            <!-- .navbar -->
            <nav id="navbar" class="navbar">
                <ul>
                    <li><a href="/#home">Home üè†</a></li>
                    <li><a href="/about#about">About ‚ÑπÔ∏è</a></li>
                    <li><a href="/contact#contact">Contact ‚òéÔ∏è</a></li>
                    <li><a href="/premium#premium">Premium üåü</a></li>
                </ul>
            </nav>
            <!-- .navbar -->

        



            <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
            <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        </div>
    </header>
    <!-- End Header -->

    <!-- Language Selection Modal -->
    <div class="modal fade" id="languageModal" tabindex="-1" aria-labelledby="languageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="languageModalLabel">Select Language</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <a href="http://127.0.0.1:8000/lang/en" class="btn btn-primary m-2">English</a>
                    <a href="http://127.0.0.1:8000/lang/my" class="btn btn-success m-2">·Äô·Äº·Äî·Ä∫·Äô·Ä¨</a>
                </div>
            </div>
        </div>
    </div>





    <div style="min-height: 100vh">

        <style>
            .turntable {
                position: relative;
                margin: auto;
                display: block;
                margin-top: 15px;
                width: 300px;
                height: 280px;
                background: #c392eb;
                border-radius: 5%;
                box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.7);
            }

            @media screen and (max-width: 360px) {
                .turntable {
                    width: 100%;
                }

                .record {
                    scale: 0.8;
                }
            }

            .record {
                position: absolute;
                left: 35px;
                top: 35px;
                width: 200px;
                height: 200px;
                background: black;
                border-radius: 50%;
                animation: spin 1s infinite linear;
            }

            @keyframes spin {
                0% {
                    transform: none;
                }

                100% {
                    transform: rotate(360deg);
                }
            }

            .record::before {
                content: '';
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                position: absolute;
                width: 180px;
                height: 180px;
                background: repeating-radial-gradient(black, black 5px, #1C1C1C 6px, #1C1C1C 7px);
                border-radius: 50%;
            }

            .overlay {
                content: '';
                left: 35px;
                top: 35px;
                position: absolute;
                width: 200px;
                height: 200px;
                background: linear-gradient(45deg, transparent, 40%, rgba(255, 255, 255, 0.35), 60%, transparent);
                border-radius: 50%;
            }

            .inner {
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                width: 55px;
                height: 55px;
                background: linear-gradient(white, white 50%, #F796A8 50%, #F796A8);
                border-radius: 50%;
            }

            .inner::before {
                content: '';
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                width: 10px;
                height: 10px;
                background: black;
                border-radius: 50%;
            }

            .inner::after {
                width: 55px;
                text-align: center;
                font-family: sans-serif;
                font-size: 8px;
                position: absolute;
                left: 50%;
                top: 10px;
                transform: translateX(-50%);
            }

            .arm-holder {
                position: absolute;
                width: 40px;
                height: 40px;
                background: gray;
                border-radius: 50%;
                right: 20px;
                top: 40px;
            }

            .arm-holder::after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 30px;
                height: 30px;
                background: #939393;
                border-radius: 50%;
            }

            .arm {
                position: absolute;
                right: 13px;
                width: 60px;
                top: 10px;
                height: 110px;
                border: 10px solid #939393;
                transform: skew(-20deg, -20deg);
                transform-origin: top right;
                border-left-color: transparent;
                border-top-color: transparent;
                border-radius: 0 0 30% 0;
                animation: armTwitch 0.5s infinite;
                animation-direction: alternate-reverse;
            }

            @keyframes armTwitch {
                0% {
                    transform: skew(-20deg, -20deg);
                }

                100% {
                    transform: skew(-20deg, -20deg) rotate(1deg);
                }
            }

            .arm::before {
                content: '';
                position: absolute;
                width: 20px;
                height: 30px;
                background: gray;
                transform: skew(20deg, 20deg) rotate(75deg);
                top: 98px;
                left: -10px;
                border-radius: 20%;
                clip-path: polygon(10% 0%, 90% 0%, 100% 100%, 0% 100%);
            }

            .dial {
                position: absolute;
                bottom: 20px;
                right: 20px;
                width: 25px;
                height: 25px;
                background: #333642;
                border-radius: 50%;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
                z-index: 2;
            }

            .dial::before {
                content: '';
                left: 50%;
                transform: translateX(-50%);
                top: 2px;
                position: absolute;
                width: 2px;
                height: 5px;
                background: white;
                border-radius: 50%;
            }

            .gramo-btn {
                position: absolute;
                bottom: 20px;
                right: 55px;
                width: 32px;
                height: 32px;
                background: radial-gradient(circle at 30% 30%, #e2b97f 70%, #b88c3a 100%);
                border: 3px solid #a67c3d;
                border-radius: 50%;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), 0 0 0 4px #fff2d6 inset;
                cursor: pointer;
                z-index: 2;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: box-shadow 0.2s;
            }

            .gramo-btn:active {
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5), 0 0 0 2px #fff2d6 inset;
            }

            .gramo-btn-label {
                position: absolute;
                bottom: -18px;
                left: 50%;
                transform: translateX(-50%);
                font-family: sans-serif;
                font-size: 11px;
                color: #a67c3d;
                background: #fff2d6;
                padding: 1px 6px;
                border-radius: 8px;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
                pointer-events: none;
                user-select: none;
            }

            .paused .record {
                animation-play-state: paused !important;
            }

            .paused .arm {
                animation-play-state: paused !important;
            }
        </style>

        <div class="mail-animation-con flex-wrap
                                     casual-theme-bg ">
            <div class="text-center">
                <h2 class="zoom-in-on-load brand-text-font">
                    You have just received a letter from Frank
                </h2>
                <h4 class="brand-text-font zoom-in-on-load">Click to open</h4>
                <br>
                <img src="./images/arrow-down.gif" alt="arrow down animation"
                    width="50px">
                <div class="mail-emoji zoom-in-on-load mt-0">‚úâÔ∏è</div>
            </div>
        </div>

        <div class="hero
                                     casual-theme-bg ">


            <div class="paper
             book-bg                                                                         zoom-in-on-load"
                id="paper-background">

                <div class="row justify-content-center">
                    <div class="col-12">
                        <textarea class="border-0 titleConArea" disabled>Happy Birthday Bestie! ü•≥</textarea>
                    </div>
                    <div class="col-12">

                        <iframe width="560" height="315" src="https://www.youtube.com/embed/VuNIsY6JdUw?si=biWjHLaqTsut43So&autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

         
                    </div>
                </div>
                <br><br>
                <textarea class="border-0 conTarea" disabled>Hii Dear Friend, Happy Birthday :) I wish you can achieve all the things you desire in this world! Plus many more achievements in your life!

+YOU BELONG WITH ME
YOU ARE MY FOREVER BEST FRIEND!!!</textarea>
            </div>



        </div>

        <script>
            function copyText(url) {
                const tempInput = document.createElement("input");
                tempInput.value = url;
                document.body.appendChild(tempInput);
                tempInput.select();
                tempInput.setSelectionRange(0, 99999);
                document.execCommand("copy");
                document.body.removeChild(tempInput);
                alert("Copied: " + url);
            }
        </script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $('#favBtn').on('click', function () {
                var btn = $(this);
                if (btn.text().trim() === 'Added to Favourite') return;

                $.ajax({
                    url: "http://127.0.0.1:8000/letter/favourite/add",
                    type: "POST",
                    data: {
                        letterId: "f774b73e-94c6-4c5e-b99c-eb6df034db2b",
                        _token: "wcmkiqJGPE3FIX0kRwP4IAOUQJUaDT4sNU2kahY4"
                    },
                    success: function (res) {
                        if (res.success) {
                            btn.text('Added to Favourite');
                            $('#favMsg').html('<div class="alert alert-success alert-form m-auto">' + res.message + '</div>');
                        } else {
                            $('#favMsg').html('<div class="alert alert-warning alert-form m-auto">' + res.message + '</div>');
                        }
                    },
                    error: function (xhr) {
                        $('#favMsg').html('<div class="alert alert-danger alert-form m-auto">Error adding to favourite.</div>');
                    }
                });
            });

            $('#commentForm').on('submit', function (e) {
                e.preventDefault();
                var commentText = $('#comment').val();
                if (!commentText.trim()) return;

                $.ajax({
                    url: "http://127.0.0.1:8000/letter/comment/f774b73e-94c6-4c5e-b99c-eb6df034db2b",
                    type: "POST",
                    data: {
                        comment: commentText,
                        _token: "wcmkiqJGPE3FIX0kRwP4IAOUQJUaDT4sNU2kahY4"
                    },
                    success: function (res) {
                        if (res.success) {
                            var comment = res.comment;
                            var html = `
                        <div class="card my-3 shadow-sm" data-id="${comment.id}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="mb-0">${comment.userName}</h6>
                                    <small class="text-muted">${comment.created_at}</small>
                                </div>
                                <p class="mb-2">${comment.comment}</p>
                                                                    <button class="btn btn-sm btn-outline-danger delete-comment-btn" data-id="${comment.id}">Delete üóëÔ∏è</button>
                                                            </div>
                        </div>
                    `;
                            $('#commentList').prepend(html);
                            $('#comment').val('');
                        }
                    },
                    error: function (xhr) {
                        alert('Error adding comment.');
                    }
                });
            });

            $('#commentList').on('click', '.delete-comment-btn', function () {
                var btn = $(this);
                var commentId = btn.data('id');
                $.ajax({
                    url: "http://127.0.0.1:8000/letter/deletecomment/" + commentId,
                    type: "POST",
                    data: {
                        _token: "wcmkiqJGPE3FIX0kRwP4IAOUQJUaDT4sNU2kahY4"
                    },
                    success: function (res) {
                        if (res.success) {
                            btn.closest('.card').remove();
                        } else {
                            alert(res.message || 'Error deleting comment.');
                        }
                    },
                    error: function (xhr) {
                        alert('Error deleting comment.');
                    }
                });
            });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const emoji = document.querySelector(".mail-emoji");
                const container = document.querySelector(".mail-animation-con");

                if (emoji && container) {
                    emoji.addEventListener("click", function () {
                        emoji.classList.add("shrink-out");
                        setTimeout(() => {
                            container.classList.add("fade-out-bg");
                        }, 500);
                        setTimeout(() => {
                            container.style.display = "none";
                        }, 1500);
                    });
                }
            });
        </script>

        <script>
            function hasAutoplay(src) {
                return /autoplay=1/.test(src);
            }

            const ytIframe = document.getElementById('yt-iframe');
            const turntable = document.getElementById('turntable');
            const btn = document.getElementById('toggleBtn');
            const btnLabel = document.getElementById('btnLabel');
            const btnIcon = document.getElementById('btnIcon');
            let isPlaying = false;

            function setIcon(play) {
                if (play) {
                    btnIcon.innerHTML = `
                <rect id="pause1" x="4" y="4" width="3" height="10" rx="1.2" fill="#333642"/>
                <rect id="pause2" x="11" y="4" width="3" height="10" rx="1.2" fill="#333642"/>
            `;
                } else {
                    btnIcon.innerHTML = `
                <polygon points="5,4 14,9 5,14" fill="#333642"/>
            `;
                }
            }

            function setInitialState() {
                if (ytIframe && turntable && btnLabel && btnIcon) {
                    if (hasAutoplay(ytIframe.src)) {
                        isPlaying = true;
                        turntable.classList.remove('paused');
                        btnLabel.textContent = 'Stop';
                        setIcon(true);
                    } else {
                        isPlaying = false;
                        turntable.classList.add('paused');
                        btnLabel.textContent = 'Resume';
                        setIcon(false);
                    }
                }
            }

            if (btn) {
                btn.addEventListener('click', function () {
                    if (ytIframe && turntable && btnLabel && btnIcon) {
                        if (isPlaying) {
                            ytIframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                            turntable.classList.add('paused');
                            btnLabel.textContent = 'Resume';
                            setIcon(false);
                            isPlaying = false;
                        } else {
                            ytIframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                            turntable.classList.remove('paused');
                            btnLabel.textContent = 'Stop';
                            setIcon(true);
                            isPlaying = true;
                        }
                    }
                });
            }

            window.addEventListener('DOMContentLoaded', setInitialState);
        </script>

    </div>



    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">

        <div class="container-fluid">
            <div class="row mb-3">
                <div class="col-12 text-center">
                    <h3 class="text-center">Create your first digital letter ‚ù§Ô∏è</h3>
                    <a href="/#home">
                        <button class="btn btn-light btn-c-light"
                            style="border-radius: 50px; padding: 8px 20px; font-size: 14px;">Create your own letter
                            üìÉ</button>
                    </a>
                </div>
            </div>
            <div class="st-border"></div>
            <div class="row gy-3 mt-3 justify-content-center">


                <div class="col-lg-3 col-md-6 footer-links d-flex">
                    <div>
                        <h4>Contact</h4>
                        <p>
                            <strong>Phone:</strong> +959 111 222 333<br>
                            <strong>Email:</strong> contact@explove.com<br>
                        </p>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 footer-links d-flex">
                    <div>
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="/#home">Home üè†</a></li>
                            <li><a href="/about#about">About ‚ÑπÔ∏è</a></li>
                            <li><a href="/contact#contact">Contact ‚òéÔ∏è</a></li>
                            <li><a href="/premium#premium">Premium üåü</a></li>
                        </ul>
                    </div>
                </div>



                <div class="col-lg-3 col-md-6 footer-links">
                    <h4>Follow Us</h4>
                    <div class="social-links d-flex">
                        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-youtube"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-tiktok"></i></a>
                    </div>
                </div>

            </div>
        </div>

        <div class="container">
            <div class="copyright">
                &copy; Copyright <strong><span>Explove</span></strong>. All Rights Reserved
            </div>
            <div class="credits">
                Designed & Developed by Frank
            </div>
        </div>

    </footer><!-- End Footer -->
    <!-- End Footer -->



    <!-- Scroll Up Arrow -->
    <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>



    <div id="dynamic-toast-container" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 9999;">
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('http://127.0.0.1:8000/service-worker.js')
                    .then(function (registration) {
                        console.log('ServiceWorker registration successful:', registration);
                    }, function (error) {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>

</body>


<!-- Vendor JS Files -->
<script src="http://127.0.0.1:8000/user/vendor/aos/aos.js"></script>
<script src="http://127.0.0.1:8000/user/vendor/glightbox/js/glightbox.min.js"></script>
<script src="http://127.0.0.1:8000/user/vendor/purecounter/purecounter_vanilla.js"></script>
<script src="http://127.0.0.1:8000/user/vendor/swiper/swiper-bundle.min.js"></script>
<script src="http://127.0.0.1:8000/user/vendor/php-email-form/validate.js"></script>



<!-- Bootstrap JS (Only this one is needed) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">
    </script>

<!-- jQuery if you still need it -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<!-- Template Main JS File -->
<script src="http://127.0.0.1:8000/user/js/main.js"></script>
<script>
    function autoResizeTextarea(el) {
        el.style.height = 'auto';
        el.style.height = el.scrollHeight + 'px';
    }

    function debounce(fn, delay) {
        let timer = null;
        return function (...args) {
            clearTimeout(timer);
            timer = setTimeout(() => fn.apply(this, args), delay);
        };
    }

    // Match /view/letter/<any-non-empty-id> (e.g., UUID)
    const isRandomLetterRoute = /^\/view\/letter\/[^\/]+$/.test(window.location.pathname);

    if (!isRandomLetterRoute) {
        document.querySelectorAll('textarea').forEach(function (textarea) {
            textarea.style.overflow = 'hidden';
            textarea.style.resize = 'none';
            const debouncedResize = debounce(function () {
                autoResizeTextarea(textarea);
            }, 50); // 50ms delay
            textarea.addEventListener('input', debouncedResize);
            autoResizeTextarea(textarea);
        });
    }
</script>
<script src="http://127.0.0.1:8000/user/js/functions.js"></script>

</html>
